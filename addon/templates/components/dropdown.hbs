<div
  class="{{if multiple "cs-component-dropdown--multiple" "cs-component-dropdown"}} {{if isOpen "is-open"}} {{@theme}}"
  data-test-cs-component={{dataTestName}}
>
  <div class="cs-component-dropdown__container">
    {{#if searchAction}}
      {{#if multiple}}
        {{#power-select-multiple
          options=options
          onchange=(action (mut selected))
          selected=selected
          search=(action searchAction)
          searchField=searchField
          renderInPlace=true
          ariaLabel=label
          onfocus=(action (mut isFocused) true)
          onblur=(action (mut isFocused) false)
          onopen=(action (mut isOpen) true)
          onclose=(action (mut isOpen) false) as |option|}}
          {{get option searchField}}
        {{/power-select-multiple}}
      {{else}}
        {{#power-select
          options=options
          onchange=(action (mut selected))
          selected=selected
          search=(action searchAction)
          searchField=searchField
          allowClear=true
          renderInPlace=true
          ariaLabel=label
          onfocus=(action (mut isFocused) true)
          onblur=(action (mut isFocused) false)
          onopen=(action (mut isOpen) true)
          onclose=(action (mut isOpen) false) as |option|}}
          {{get option searchField}}
        {{/power-select}}
      {{/if}}
    {{else}}
      {{#if multiple}}
        {{#power-select-multiple
          options=options
          onchange=(action (mut selected))
          selected=selected
          searchField=searchField
          renderInPlace=true
          ariaLabel=label
          onfocus=(action (mut isFocused) true)
          onblur=(action (mut isFocused) false)
          onopen=(action (mut isOpen) true)
          onclose=(action (mut isOpen) false) as |option|}}
          {{get option searchField}}
        {{/power-select-multiple}}
      {{else}}
        {{#power-select
          options=options
          onchange=(action (mut selected))
          selected=selected
          searchField=searchField
          allowClear=true
          renderInPlace=true
          ariaLabel=label
          onfocus=(action (mut isFocused) true)
          onblur=(action (mut isFocused) false)
          onopen=(action (mut isOpen) true)
          onclose=(action (mut isOpen) false) as |option|}}
          {{get option searchField}}
        {{/power-select}}
      {{/if}}
    {{/if}}
    <label
      class="cs-component-dropdown--label {{if selected "with-option-selected"}} {{if (or isOpen isFocused) "is-open"}} {{@theme}}"
      data-test-cs-component-label={{dataTestName}}
    >
      {{label}}
    </label>
  </div>
</div>